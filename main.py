# Display ssd1306 OLED
from machine import Pin, I2C, ADC
from ssd1306 import SSD1306_I2C
import utime
import framebuf

yVal = machine.ADC(27)
xVal = machine.ADC(26)
button = Pin(22, Pin.IN, Pin.PULL_UP)

back = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00?\x00\x00\x00\x00\xfc\x00\x00~\x00\x00\x00\x00~\x00\x00\xf8\x00\x00\x00\x00\x1f\x00\x01\xf0\x00\x00\x00\x00\x0f\x80\x03\xf0\x00\x00\x00\x00\x0f\xc0\x03\xe0\x00\x00\x00\x00\x07\xc0\x07\xc0\x00\x00\x00\x00\x03\xe0\x07\x80\x00\x00\x00\x00\x01\xe0\x0f\x80\x00\x00\x00\x00\x01\xf0\x0f\x00\x00\x00\x00\x00\x00\xf0\x1f\x00\x00\x00\x00\x00\x00\xf8\x1e\x00\x00\x00\x00\x00\x00x\x1e\x00\x00\x00\x00\x00\x00x>\x00\x00\x00\x00\x00\x00|<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<|\x00\x00\x00\x00\x00\x00>x\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1e|\x00\x00\x00\x00\x00\x00><\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<>\x00\x00\x00\x00\x00\x00|\x1e\x00\x00\x00\x00\x00\x00x\x1e\x00\x00\x00\x00\x00\x00x\x1f\x00\x00\x00\x00\x00\x00\xf8\x0f\x00\x00\x00\x00\x00\x00\xf0\x0f\x80\x00\x00\x00\x00\x01\xf0\x07\x80\x00\x00\x00\x00\x01\xe0\x07\xc0\x00\x00\x00\x00\x03\xe0\x03\xe0\x00\x00\x00\x00\x07\xc0\x03\xf0\x00\x00\x00\x00\x0f\xc0\x01\xf0\x00\x00\x00\x00\x0f\x80\x00\xf8\x00\x00\x00\x00\x1f\x00\x00~\x00\x00\x00\x00~\x00\x00?\x00\x00\x00\x00\xfc\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
pupil = bytearray(b'\x00~\x00\x03\xff\xc0\x07\xff\xe0\x0f\xff\xf0\x1f\xff\xf8?\xff\xfc\x7f\xff\xfe\x7f\xff\xfe\x7f\xff\xfe\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x7f\xff\xfe\x7f\xff\xfe?\xff\xfc\x1f\xff\xf8\x0f\xff\xf0\x07\xff\xe0\x03\xff\xc0\x00\xff\x00')

b1 = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00?\x00\x00\x00\x00\xfc\x00\x00~\x00\x00\x00\x00~\x00\x00\xf8\x00\x00\x00\x00\x1f\x00\x01\xf0\x00\x7f\xfc\x00\x0f\x80\x03\xf0\x0f\xff\xff\xe0\x0f\xc0\x03\xe0\x7f\xff\xff\xfc\x07\xc0\x07\xc3\xff\xff\xff\xff\x83\xe0\x07\x8f\xff\x80\x03\xff\xe1\xe0\x0f\xbf\xf0\x00\x00\x1f\xf9\xf0\x0f\x7f\x80\x00\x00\x03\xfc\xf0\x1f\xfe\x00\x00\x00\x00\xfe\xf8\x1f\xf8\x00\x07\xe0\x00?\xf8\x1f\xf0\x00?\xfc\x00\x1f\xf8?\xc0\x00\x7f\xfe\x00\x07\xfc?\x80\x00\xff\xff\x00\x03\xfc?\x00\x01\xff\xff\x80\x01\xfc>\x00\x03\xff\xff\xc0\x00\xfc~\x00\x07\xff\xff\xe0\x00\xfe|\x00\x07\xff\xff\xe0\x00~|\x00\x07\xff\xff\xe0\x00~|\x00\x0f\xff\xff\xf0\x00>x\x00\x0f\xff\xff\xf0\x00>x\x00\x0f\xff\xff\xf0\x00>x\x00\x0f\xff\xff\xf0\x00\x1ex\x00\x0f\xff\xff\xf0\x00\x1ex\x00\x0f\xff\xff\xf0\x00\x1e|\x00\x0f\xff\xff\xf0\x00><\x00\x07\xff\xff\xe0\x00<<\x00\x07\xff\xff\xe0\x00<<\x00\x03\xff\xff\xc0\x00<>\x00\x01\xff\xff\x80\x00|\x1e\x00\x00\xff\xff\x00\x00x\x1e\x00\x00\x7f\xfe\x00\x00x\x1f\x00\x00?\xfc\x00\x00\xf8\x0f\x00\x00\x0f\xf0\x00\x00\xf0\x0f\x80\x00\x00\x00\x00\x01\xf0\x07\x80\x00\x00\x00\x00\x01\xe0\x07\xc0\x00\x00\x00\x00\x03\xe0\x03\xe0\x00\x00\x00\x00\x07\xc0\x03\xf0\x00\x00\x00\x00\x0f\xc0\x01\xf0\x00\x00\x00\x00\x0f\x80\x00\xf8\x00\x00\x00\x00\x1f\x00\x00~\x00\x00\x00\x00~\x00\x00?\x00\x00\x00\x00\xfc\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
b2 = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00?\x00\x00\x00\x00\xfc\x00\x00~\x00\x00\x00\x00~\x00\x00\xf8\x00\x00\x00\x00\x1f\x00\x01\xf0\x00\x00\x00\x00\x0f\x80\x03\xf0\x00\x00\x00\x00\x0f\xc0\x03\xe0\x00\x00\x00\x00\x07\xc0\x07\xc0\x00\x00\x00\x00\x03\xe0\x07\x80\x00\x00\x00\x00\x01\xe0\x0f\x80\x00\x00\x00\x00\x01\xf0\x0f\x00\x00\x00\x00\x00\x00\xf0\x1f\x00\x00\x00\x00\x00\x00\xf8\x1e\x00\x00\x00\x00\x00\x00x\x1e\x00\x00\x00\x00\x00\x00x>\x00\x00\x00\x00\x00\x00|<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<|\x00\x00\x00\x00\x00\x00>x\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1e|\x00\x07\xe0\x00\x00\x00\x1e\x7f\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xff\xfe\x7f\xff\xff\xff\xff\xff\xff\xfex\x00\x0f\xff\xff\xf0\x01\xfe|\x00\x0f\xff\xff\xf0\x00><\x00\x07\xff\xff\xe0\x00<<\x00\x07\xff\xff\xe0\x00<<\x00\x03\xff\xff\xc0\x00<>\x00\x01\xff\xff\x80\x00|\x1e\x00\x00\xff\xff\x00\x00x\x1e\x00\x00\x7f\xfe\x00\x00x\x1f\x00\x00?\xfc\x00\x00\xf8\x0f\x00\x00\x0f\xf0\x00\x00\xf0\x0f\x80\x00\x00\x00\x00\x01\xf0\x07\x80\x00\x00\x00\x00\x01\xe0\x07\xc0\x00\x00\x00\x00\x03\xe0\x03\xe0\x00\x00\x00\x00\x07\xc0\x03\xf0\x00\x00\x00\x00\x0f\xc0\x01\xf0\x00\x00\x00\x00\x0f\x80\x00\xf8\x00\x00\x00\x00\x1f\x00\x00~\x00\x00\x00\x00~\x00\x00?\x00\x00\x00\x00\xfc\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')
b3 = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00?\x00\x00\x00\x00\xfc\x00\x00~\x00\x00\x00\x00~\x00\x00\xf8\x00\x00\x00\x00\x1f\x00\x01\xf0\x00\x00\x00\x00\x0f\x80\x03\xf0\x00\x00\x00\x00\x0f\xc0\x03\xe0\x00\x00\x00\x00\x07\xc0\x07\xc0\x00\x00\x00\x00\x03\xe0\x07\x80\x00\x00\x00\x00\x01\xe0\x0f\x80\x00\x00\x00\x00\x01\xf0\x0f\x00\x00\x00\x00\x00\x00\xf0\x1f\x00\x00\x00\x00\x00\x00\xf8\x1e\x00\x00\x00\x00\x00\x00x\x1e\x00\x00\x00\x00\x00\x00x>\x00\x00\x00\x00\x00\x00|<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<<\x00\x00\x00\x00\x00\x00<|\x00\x00\x00\x00\x00\x00>x\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1ex\x00\x00\x00\x00\x00\x00\x1e|\x00\x00\x00\x00\x00\x00\x1e|\x00\x00\x00\x00\x00\x00>|\x00\x00\x00\x00\x00\x00|>\x00\x00\x00\x00\x00\x00\xfc>\x00\x00\x00\x00\x00\x00\xfc?\x00\x00\x00\x00\x00\x01\xfc\x1f\x80\x00\x00\x00\x00\x03\xf8\x1f\xc0\x00\x00\x00\x00\x07\xf8\x1f\xf0\x00\x00\x00\x00\x1f\xf8\x0f\xf8\x00\x00\x00\x00?\xf0\x0f\xfe\x00\x00\x00\x00\xff\xf0\x07\xff\x80\x00\x00\x03\xff\xe0\x07\xff\xf0\x00\x00\x1f\xfb\xe0\x03\xef\xff\x80\x03\xff\xe7\xc0\x03\xf3\xff\xff\xff\xff\x8f\xc0\x01\xf0\x7f\xff\xff\xfc\x0f\x80\x00\xf8\x0f\xff\xff\xe0\x1f\x00\x00~\x00\x7f\xfc\x00~\x00\x00?\x00\x00\x00\x00\xfc\x00\x00\x1f\x80\x00\x00\x01\xf8\x00\x00\x0f\xe0\x00\x00\x07\xf0\x00\x00\x07\xf8\x00\x00\x1f\xe0\x00\x00\x03\xff\x00\x00\xff\xc0\x00\x00\x00\xff\xf0\x0f\xff\x00\x00\x00\x00?\xff\xff\xfc\x00\x00\x00\x00\x0f\xff\xff\xf0\x00\x00\x00\x00\x01\xff\xff\x80\x00\x00\x00\x00\x00\x1f\xf8\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')

WIDTH  = 128                                          # oled display width
HEIGHT = 64                                           # oled display height

i2c=I2C(0,sda=Pin(0), scl=Pin(1), freq=200000)
oled = SSD1306_I2C(WIDTH, HEIGHT, i2c)                # Init oled display

# Clear oled 
oled.fill(0)

while True:

    oled.fill(0)
    Y = yVal.read_u16()
    X = xVal.read_u16()
    X = ((X - (65535/2))/65535)*25
    X2 = X
    Y = ((Y - (65535/2))/65535)*25
    Y2 = Y
    #blink 
    if Y < 10 and Y > -10 and X < 10 and X > -10 and not button.value():  
        blink = [b1,b2,b3,back,b3,b2,b1]
        for b in blink:
            fbEye = framebuf.FrameBuffer(b,64,64, framebuf.MONO_HLSB)
            oled.blit(fbEye,0,0)
            oled.blit(fbEye,64,0) 
            oled.show()
            
    fbEye = framebuf.FrameBuffer(back,64,64, framebuf.MONO_HLSB)
    oled.blit(fbEye,0,0)
    oled.blit(fbEye,64,0)
    fbPupil= framebuf.FrameBuffer(pupil,24,24, framebuf.MONO_HLSB)
    
    #crossed eyes 
    if Y > 10 and not button.value():
        X = 10.0;
        X2 = -10;
        Y = 0.0;
        Y2 = 0.0;
    if Y < -10 and not button.value():
        X = -10.0;
        X2 = 10;
        Y = 0.0;
        Y2 = 0.0;

    oled.blit(fbPupil,20 + int(X) , 20 + int(Y))
    oled.blit(fbPupil,84 + int(X2), 20 + int(Y2))

    oled.show()

